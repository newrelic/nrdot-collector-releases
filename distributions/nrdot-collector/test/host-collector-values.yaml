additionalLabels:
  e2eTestLogSelector: nrdot-collector-e2e
podLabels:
  e2eTestLogSelector: nrdot-collector-e2e

mode: daemonset
# disable exposing default ports to avoid k8s scheduling conflicts
ports:
  otlp:
    enabled: false
  otlp-http:
    enabled: false
  jaeger-compact:
    enabled: false
  jaeger-thrift:
    enabled: false
  jaeger-grpc:
    enabled: false
  zipkin:
    enabled: false
  metrics:
    enabled: false

configMap:
  create: false

command:
  extraArgs:
    - --config=/etc/nrdot-collector/config.yaml
    # configure liveliness probe according to chart's expectations
    - '"--config=yaml:extensions::health_check::endpoint: ${env:MY_POD_IP}:13133"'

extraEnvs:
  - name: OTEL_EXPORTER_OTLP_ENDPOINT
    valueFrom:
      secretKeyRef:
        name: collector-secrets
        key: nrBackendUrl
  - name: NEW_RELIC_LICENSE_KEY
    valueFrom:
      secretKeyRef:
        name: collector-secrets
        key: nrIngestKey
  - name: SCENARIO_TAG
    valueFrom:
      secretKeyRef:
        name: collector-secrets
        key: scenarioTag
  - name: OTEL_RESOURCE_ATTRIBUTES
    value: "testKey=$(SCENARIO_TAG)"
